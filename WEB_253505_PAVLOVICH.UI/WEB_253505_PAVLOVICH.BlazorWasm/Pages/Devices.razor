@page "/devices"
@attribute [Authorize]
@using Microsoft.AspNetCore.Authorization;

<PageTitle>Devices</PageTitle>
<CategorySelector OnCategoryChanged="CategoryChanged" />
<DevicesList/>

@code {
    [Inject]
    public IDataService DataService{ get; set; }

    protected override async Task OnInitializedAsync()
    {
        await DataService.GetProductListAsync();
    }

    async void CategoryChanged()
    {
        await DataService.GetProductListAsync();
        DataService.CurrentPage = 1;
        StateHasChanged();
    }
}
